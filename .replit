modules = ["python-3.11", "nodejs-20"]

# This builds the frontend and starts the Python backend
run = "bash -c 'cd frontend && npm install && npm run build && cd .. && python main.py'"

hidden = ["node_modules", ".pythonlibs"]

[nix]
channel = "stable-24_05"

[deployment]
run = ["python", "main.py"]

# This matches the port in your main.py (5000)
[[ports]]
localPort = 5000
externalPort = 80

[env]
PYTHONPATH = "."
DATABASE_URL = "postgresql://neondb_owner:npg_UuYP8ajchEx1@ep-polished-smoke-a465m3uc.us-east-1.aws.neon.tech/neondb?sslmode=require"

[languages.python]
pattern = "**/*.py"
syntax = "python"

[languages.typescript]
pattern = "**/*.{ts,tsx}"
syntax = "typescript"

[languages.javascript]
pattern = "**/*.{js,jsx}"
syntax = "javascript"
